process GETUNCALRECHIT = { 

     source = DAQEcalTBInputService{

# good cosmic run, just mask ic == 1597
      untracked vstring fileNames = { 'file:/data/franzoni/data/cosm-sm26/H4-000039019-SM26-COSMIC-STD'}

# good pedestal but exclude ic == 1172
#untracked vstring fileNames = { 'file:/data/franzoni/data/cosm-sm16/H4-000037495-SM16-PEDESTAL-STD'}

}

     untracked PSet maxEvents = {untracked int32 input = 150}

include "EventFilter/EcalRawToDigiDev/data/EcalUnpackerData.cfi"

    # imposed by hardware / raw data - only this one will be unpacked (by default: all 600-670)
    replace ecalEBunpacker.FEDs = {13}
    replace ecalEBunpacker.orderedFedList = {13}
     replace ecalEBunpacker.orderedDCCIdList = {25}


     es_source src1 = EcalTrivialConditionRetriever{
       untracked vdouble amplWeights = { -0.333, -0.333, -0.333,
                                          0.000,  0.000,  1.000,
                                          0.000,  0.000,  0.000,  0.000 }
       untracked vdouble pedWeights  = {  0.333,  0.333,  0.333,
                                          0.000,  0.000,  0.000,
                                          0.000,  0.000,  0.000,  0.000 }
       untracked vdouble jittWeights = {  0.040,  0.040,  0.040,
                                          0.000,  1.320, -0.050,
                                         -0.500, -0.500, -0.400,  0.000 }
     }

#     module ecalUncalibHit = ecalFixedAlphaBetaFitUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalFixedAlphaBetaFitUncalibRecHit.cfi"

#     module ecalUncalibHit = ecalWeightUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalWeightUncalibRecHit.cfi"
#     replace ecalUncalibHit.EBdigiCollection = ecalEBunpacker:ebDigis
#     replace ecalUncalibHit.EEdigiCollection = ecalEBunpacker:eeDigis


# crude  producer of rechits starting from digis
module ecalCrudeUncalibRecHit = EcalCrudeUncalibRecHitProducer 
{
    InputTag EBdigiCollection = ecalEBunpacker:ebDigis
    InputTag EEdigiCollection = ecalEBunpacker:eeDigis
    string EBhitCollection  = "EcalUncalibRecHitsEB"
    string EEhitCollection  = "EcalUncalibRecHitsEE"
}




module dumpURecHit = GetEcalURechit{

      InputTag EcalUncalibratedRecHitCollection = ecalCrudeUncalibRecHit:EcalUncalibRecHitsEB

      untracked vint32 maskedChannels      = {1597, 1172}

}






module dumpEv = EventContentAnalyzer {}

path p = {
	ecalEBunpacker
                #, ecalUncalibHit 
                , ecalCrudeUncalibRecHit
                , dumpURecHit
               , dumpEv
             }





    service = MessageLogger{
       untracked vstring destinations = { "cout" }

       untracked vstring categories = { 
                                                            "GetEcalURechit"
                                                           #,  "EcalTBRawToDigi"
                                                           #,  "EcalRawToDigiDev"
                                                         }

        untracked PSet cout = {   untracked string threshold = "INFO"  }

}

}
