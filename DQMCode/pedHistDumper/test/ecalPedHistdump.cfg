process TESTGRAPHDUMPER = { 

# this is for 07 EE h2, EventFilter/EcalTBRawToDigi V04-05-00-17
include "EventFilter/EcalTBRawToDigi/data/Ecal07UnpackerData.cfi"
     replace ecalEBunpacker.tbTowerStripChannelMapFile = "EventFilter/EcalTBRawToDigi/data/h2.map"
     replace ecalEBunpacker.tbTowerMapFile             = "EventFilter/EcalTBRawToDigi/data/h2_towers.map"

     source = NewEventStreamFileReader{
       untracked int32 maxEvents = 500 
       #untracked uint32 skipEvents = 200
       untracked vstring fileNames = { 'file:/data/scooper/data/h2.00014538.0000.combined.storageManager.0.0000.dat' }
       untracked uint32 debugVebosity = 10
       untracked bool   debugFlag     = true
     } 

     module graphDumperModule = EcalPedHistDumperModule {

        # selection on sm number in the barrel (1...36; 1 with tb unpacker)
        untracked vint32 listSupermodules = {1}
        
         # specify list of channels to be dumped
         untracked vint32  listChannels = {1, 2, 3, 4, 5}

         # sepecify list of samples to use
         untracked vint32 listSamples = {1,2,3}

        untracked string fileName =  'h2.00014538.0000.combined.storageManager.0.0000.dat'
      }
     
     path p = {ecalEBunpacker, graphDumperModule}

}

